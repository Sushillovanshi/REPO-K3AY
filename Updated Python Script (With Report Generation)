import socket
from datetime import datetime

def port_scanner():
    target = input("Enter target (IP or domain): ")
    start_port = 1
    end_port = 1024
    open_ports = []

    scan_time = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
    report_file = f"port_scan_report_{target.replace('.', '_')}.txt"

    print(f"\nScanning target: {target}")
    print(f"Scan started at: {scan_time}\n")

    for port in range(start_port, end_port + 1):
        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        s.settimeout(0.5)

        result = s.connect_ex((target, port))

        if result == 0:
            print(f"Port {port} is OPEN")
            open_ports.append(port)

        s.close()

    print("\nScan completed.")

    # Write report to file
    with open(report_file, "w") as file:
        file.write("NETWORK PORT SCAN REPORT\n")
        file.write("=" * 30 + "\n")
        file.write(f"Target: {target}\n")
        file.write(f"Scan Date & Time: {scan_time}\n")
        file.write(f"Port Range: {start_port}-{end_port}\n\n")

        if open_ports:
            file.write("Open Ports:\n")
            for port in open_ports:
                file.write(f"- Port {port}\n")
        else:
            file.write("No open ports found.\n")

    print(f"\nðŸ“„ Report saved as: {report_file}")

# Run the scanner
port_scanner()
